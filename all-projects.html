<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>All DIY Projects</title>
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="logo">DIY Project Hub</a>

            <button class="menu-toggle" onclick="toggleNav()">☰</button>

            <ul class="nav-links" id="navLinks">
                <li><a href="index.html">Home</a></li>
                <li><a href="all-projects.html">Projects</a></li>
                <li><a href="tool-packages.html">Tool Packages</a></li>
                <li><a href="help.html">Help</a></li>
                <li><a href="login.html">Login</a></li>
            </ul>
        </div>
    </nav>

    <main class="project-directory">
        <h1>All Projects</h1>

        <div class="project-controls">
            <input type="text" id="searchInput" placeholder="Search projects..." />

            <select id="categoryFilter">
                <option value="all">All Skill Levels</option>
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="advanced">Advanced</option>
            </select>
        </div>

        <!-- Search Bar and Filter Tags -->
        <div id="projectSearchBar"></div>

        <section class="project-grid">

            <!-- Project Card 1 -->
            <a href="projects/garden-bed.html" class="project-card">
                data-title="raised garden bed"
                data-category="beginner"
                data-tags="outdoor,woodworking">
                <img src="images/garden-bed.jpg" alt="Raised Garden Bed" />
                <div class="card-content">
                    <h2>Raised Garden Bed</h2>
                    <p>Beginner | 2–3 hrs</p>
                </div>
            </a>

            <!-- Project Card 2 -->
            <a href="projects/firepit.html" class="project-card">
                data-title="backyard fire pit"
                data-category="beginner"
                data-tags="outdoor,woodworking">
                <img src="images/firepit.jpg" alt="Backyard Fire Pit">
                <div class="card-content">
                    <h2>Backyard Fire Pit</h2>
                    <p>Intermediate | 4–5 hrs</p>
                </div>
            </a>

            <!-- Add more cards here -->
        </section>
    </main>

    <footer>
        <p>&copy; 2025 DIY Project Hub</p>
    </footer>

    <!-- Java for search bar -->
    <script type="module">
        import { setupProjectRedirectFilters } from './js/search-router.js';

        window.addEventListener('DOMContentLoaded', () => {
            setupProjectRedirectFilters(); // you can pass custom tags/categories if needed
            window.addEventListener("DOMContentLoaded", () => {
                const urlParams = new URLSearchParams(window.location.search);
                const searchTerm = urlParams.get("search") || "";
                const selectedTag = urlParams.get("tag") || "all";
                const selectedCategory = urlParams.get("category") || "all";

                document.getElementById("searchInput").value = searchTerm;
                document.getElementById("categoryFilter").value = selectedCategory;

                // Set tag
                const activeTagButton = document.querySelector(`.tag-button[data-tag="${selectedTag}"]`);
                if (activeTagButton) {
                    document.querySelectorAll(".tag-button").forEach(b => b.classList.remove("active"));
                    activeTagButton.classList.add("active");
                }

                filterProjects(); // your existing function that reads input and filters cards
            });
    </script>

</body>
</html>